[TOC]

具体场景需求见此文档 [github 微前端阶段2](https://github.com/yicheny/frontend-target/blob/main/biz/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E5%89%8D%E7%AB%AF%E9%98%B6%E6%AE%B52.md)

# 设计分析
根据之前的文档，脚本需要做的事情已经明确了：
1. 假设分支`x`需要修复缺陷/添加需求，在对应业务的子项目的x分支进行修改
2. 使用`mpm`同步所有项目的分支
3. 使用`mpm`合回主线，如果出现冲突则手动解决

实现这部分需求有几种方案：
1. 通过`gitlab`接口实现对远端项目的修改，这个方案问题在于我之前没有使用过脚本控制`gitlab`，有一定的风险，目前`27`版本是需要在`9.14`发布的，现在大概剩下两周时间，我希望留一周给测试。然后我还有其他一些微前端改造需要去做，所以我实际可以用于开发`mpm`的时间大概不到一周，所以这个方案我希望留到二期去做。
2. 通过本地控制`git`提交然后推送到远端，从配置和效果上来说，和方案1是相同的，除了实现之外，有一个需要注意的是，对项目结构有所要求（不过这个本来也是必要，因为期望通过约束目录结构以实现多项目管理，这是另一部分多项目管理的需要）。这是一个过度方案，我预期是我自己控制，不过我会提供一份文档，有需要的话其他人可以按照文档使用---这份文档本来就需要，方案2也需要的，因为脚本需要提供文档说明怎么使用。

方案2的实现和我之前写过的`project-share`脚本类似，这个脚本思路和`git subtree`类似，不过是用于`svn`的公共模块同步的一个东西，这个脚本的核心是`node`和`svn`，`svn`也是版本控制工具，虽然命令不同，不过和`git`还是有很多相通之处的。

因为我写过`project-share`，所以对这个方案的实现更有信心，思路也更明确，一期我会使用这个思路实现`mpm`。
